"use strict";(self.webpackChunkreact_for_rest_of_us=self.webpackChunkreact_for_rest_of_us||[]).push([[758],{758:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(294),s=a(387),l=a(250),r=a(655),c=a(817),o=a(62),u=a(92),m=a(210),i=a(564),d=a(983);function f(){const e=(0,l.s0)(),t=(0,n.useContext)(d.Z),a=(0,n.useContext)(i.Z),{id:f}=(0,l.UO)(),[h,E]=(0,n.useState)(!0),[p,g]=(0,n.useState)();if((0,n.useEffect)((()=>{const e=c.Z.CancelToken.source();return async function(){try{const t=await c.Z.get(`/post/${f}`,{cancelToken:e.token});g(t.data),E(!1)}catch(e){console.log("Ops")}}(),()=>{e.cancel()}}),[f]),!h&&!p)return n.createElement(m.Z,null);if(h)return n.createElement(s.Z,{title:"..."},n.createElement(o.Z,null));const y=new Date(p.createdDate),w=`${y.getMonth()+1}/${y.getDate()}/${y.getFullYear()}`;return n.createElement(s.Z,{title:p.title},n.createElement("div",{className:"d-flex justify-content-between"},n.createElement("h2",null,p.title),!!a.loggedIn&&a.user.username==p.author.username&&n.createElement("span",{className:"pt-2"},n.createElement(r.rU,{to:`/post/${p._id}/edit`,className:"text-primary mr-2",title:"Edit"},n.createElement("i",{className:"fas fa-edit"}))," ",n.createElement("a",{onClick:async function(){if(window.confirm("Do you really want to delete this post?"))try{"Success"===(await c.Z.delete(`/post/${f}`,{data:{token:a.user.token}})).data&&(t({type:"flashMassage",value:"Post was successfully deleted."}),e(`/profile/${a.user.username}`))}catch(e){console.log("Something went wrong")}},className:"delete-post-button text-danger",title:"Delete"},n.createElement("i",{className:"fas fa-trash"})))),n.createElement("p",{className:"text-muted small mb-4"},n.createElement(r.rU,{to:`/profile/${p.author.username}`},n.createElement("img",{className:"avatar-tiny",src:p.author.avatar})),"Posted by ",n.createElement(r.rU,{to:`/profile/${p.author.username}`},p.author.username)," on ",w),n.createElement("div",{className:"body-content"},n.createElement(u.D,{children:p.body,allowedElements:["p","br","strong","em","h1","h2","h3","h4","h5","h6","ol","ul","li"]})))}}}]);